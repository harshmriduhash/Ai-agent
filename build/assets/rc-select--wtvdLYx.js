import{r as t,R as En}from"./react-CskVYjlA.js";import{K as y,a as dt,f as vt,B as gn,w as mt,m as gt,e as pt,b as ht,C as xn,o as bt,z as St,c as wt,y as Ct}from"./rc-util-D-V1B0B9.js";import{c as He}from"./classnames-ELZfJkp_.js";import{F as yt}from"./rc-overflow-Bu0PTnmO.js";import"./react-dom-vpJdduAb.js";import"./rc-resize-observer-cfaxZLPN.js";import"./rc-motion-DwMjwbdb.js";import{a as pn,d as re,b as G,_ as ae,e as ze,c as nn,o as It,h as Re}from"./@babel-CJTwEOVv.js";import{T as Et}from"./@rc-component-C9wQ5nzW.js";import{L as Rt}from"./rc-virtual-list-DwKUOcNr.js";var hn=function(e){var r=e.className,o=e.customizeIcon,a=e.customizeIconProps,i=e.children,u=e.onMouseDown,c=e.onClick,v=typeof o=="function"?o(a):o;return t.createElement("span",{className:r,onMouseDown:function(s){s.preventDefault(),u==null||u(s)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},v!==void 0?v:t.createElement("span",{className:He(r.split(/\s+/).map(function(m){return"".concat(m,"-icon")}))},i))},xt=function(e,r,o,a,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,m=En.useMemo(function(){if(pn(a)==="object")return a.clearIcon;if(i)return i},[a,i]),s=En.useMemo(function(){return!!(!u&&a&&(o.length||c)&&!(v==="combobox"&&c===""))},[a,u,o.length,c,v]);return{allowClear:s,clearIcon:En.createElement(hn,{className:"".concat(e,"-clear"),onMouseDown:r,customizeIcon:m},"×")}},Wn=t.createContext(null);function Dt(){return t.useContext(Wn)}function Ot(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),r=re(e,2),o=r[0],a=r[1],i=t.useRef(null),u=function(){window.clearTimeout(i.current)};t.useEffect(function(){return u},[]);var c=function(m,s){u(),i.current=window.setTimeout(function(){a(m),s&&s()},n)};return[o,c,u]}function Un(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),r=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function o(a){(a||e.current===null)&&(e.current=a),window.clearTimeout(r.current),r.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function Mt(n,e,r,o){var a=t.useRef(null);a.current={open:e,triggerOpen:r,customizedTrigger:o},t.useEffect(function(){function i(u){var c;if(!((c=a.current)!==null&&c!==void 0&&c.customizedTrigger)){var v=u.target;v.shadowRoot&&u.composed&&(v=u.composedPath()[0]||v),a.current.open&&n().filter(function(m){return m}).every(function(m){return!m.contains(v)&&m!==v})&&a.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Pt(n){return n&&![y.ESC,y.SHIFT,y.BACKSPACE,y.TAB,y.WIN_KEY,y.ALT,y.META,y.WIN_KEY_RIGHT,y.CTRL,y.SEMICOLON,y.EQUALS,y.CAPS_LOCK,y.CONTEXT_MENU,y.F1,y.F2,y.F3,y.F4,y.F5,y.F6,y.F7,y.F8,y.F9,y.F10,y.F11,y.F12].includes(n)}var Nt=function(e,r){var o,a=e.prefixCls,i=e.id,u=e.inputElement,c=e.disabled,v=e.tabIndex,m=e.autoFocus,s=e.autoComplete,g=e.editable,T=e.activeDescendantId,l=e.value,x=e.maxLength,w=e.onKeyDown,I=e.onMouseDown,A=e.onChange,te=e.onPaste,U=e.onCompositionStart,M=e.onCompositionEnd,Z=e.onBlur,Q=e.open,ie=e.attrs,Y=u||t.createElement("input",null),z=Y,ue=z.ref,_=z.props,k=_.onKeyDown,X=_.onChange,H=_.onMouseDown,$=_.onCompositionStart,ee=_.onCompositionEnd,j=_.onBlur,le=_.style;return dt(!("maxLength"in Y.props)),Y=t.cloneElement(Y,G(G(G({type:"search"},_),{},{id:i,ref:vt(r,ue),disabled:c,tabIndex:v,autoComplete:s||"off",autoFocus:m,className:He("".concat(a,"-selection-search-input"),(o=Y)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":Q||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":Q?T:void 0},ie),{},{value:g?l:"",maxLength:x,readOnly:!g,unselectable:g?null:"on",style:G(G({},le),{},{opacity:g?null:0}),onKeyDown:function(h){w(h),k&&k(h)},onMouseDown:function(h){I(h),H&&H(h)},onChange:function(h){A(h),X&&X(h)},onCompositionStart:function(h){U(h),$&&$(h)},onCompositionEnd:function(h){M(h),ee&&ee(h)},onPaste:te,onBlur:function(h){Z(h),j&&j(h)}})),Y},Hn=t.forwardRef(Nt);function jn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Tt=typeof window<"u"&&window.document&&window.document.documentElement,Vt=Tt;function _t(n){return n!=null}function Lt(n){return!n&&n!==0}function Fn(n){return["string","number"].includes(pn(n))}function Gn(n){var e=void 0;return n&&(Fn(n.title)?e=n.title.toString():Fn(n.label)&&(e=n.label.toString())),e}function At(n,e){Vt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Ft(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var kn=function(e){e.preventDefault(),e.stopPropagation()},kt=function(e){var r=e.id,o=e.prefixCls,a=e.values,i=e.open,u=e.searchValue,c=e.autoClearSearchValue,v=e.inputRef,m=e.placeholder,s=e.disabled,g=e.mode,T=e.showSearch,l=e.autoFocus,x=e.autoComplete,w=e.activeDescendantId,I=e.tabIndex,A=e.removeIcon,te=e.maxTagCount,U=e.maxTagTextLength,M=e.maxTagPlaceholder,Z=M===void 0?function(L){return"+ ".concat(L.length," ...")}:M,Q=e.tagRender,ie=e.onToggleOpen,Y=e.onRemove,z=e.onInputChange,ue=e.onInputPaste,_=e.onInputKeyDown,k=e.onInputMouseDown,X=e.onInputCompositionStart,H=e.onInputCompositionEnd,$=e.onInputBlur,ee=t.useRef(null),j=t.useState(0),le=re(j,2),F=le[0],h=le[1],O=t.useState(!1),fe=re(O,2),ye=fe[0],he=fe[1],q="".concat(o,"-selection"),Ne=i||g==="multiple"&&c===!1||g==="tags"?u:"",oe=g==="tags"||g==="multiple"&&c===!1||T&&(i||ye);At(function(){h(ee.current.scrollWidth)},[Ne]);var ke=function(b,P,K,J,B){return t.createElement("span",{title:Gn(b),className:He("".concat(q,"-item"),ae({},"".concat(q,"-item-disabled"),K))},t.createElement("span",{className:"".concat(q,"-item-content")},P),J&&t.createElement(hn,{className:"".concat(q,"-item-remove"),onMouseDown:kn,onClick:B,customizeIcon:A},"×"))},De=function(b,P,K,J,B,me){var xe=function(Ve){kn(Ve),ie(!i)};return t.createElement("span",{onMouseDown:xe},Q({label:P,value:b,disabled:K,closable:J,onClose:B,isMaxTag:!!me}))},ve=function(b){var P=b.disabled,K=b.label,J=b.value,B=!s&&!P,me=K;if(typeof U=="number"&&(typeof K=="string"||typeof K=="number")){var xe=String(me);xe.length>U&&(me="".concat(xe.slice(0,U),"..."))}var Te=function(ne){ne&&ne.stopPropagation(),Y(b)};return typeof Q=="function"?De(J,me,P,B,Te):ke(b,me,P,B,Te)},E=function(b){if(!a.length)return null;var P=typeof Z=="function"?Z(b):Z;return typeof Q=="function"?De(void 0,P,!1,!1,void 0,!0):ke({title:P},P,!1)},f=t.createElement("div",{className:"".concat(q,"-search"),style:{width:F},onFocus:function(){he(!0)},onBlur:function(){he(!1)}},t.createElement(Hn,{ref:v,open:i,prefixCls:o,id:r,inputElement:null,disabled:s,autoFocus:l,autoComplete:x,editable:oe,activeDescendantId:w,value:Ne,onKeyDown:_,onMouseDown:k,onChange:z,onPaste:ue,onCompositionStart:X,onCompositionEnd:H,onBlur:$,tabIndex:I,attrs:gn(e,!0)}),t.createElement("span",{ref:ee,className:"".concat(q,"-search-mirror"),"aria-hidden":!0},Ne," ")),D=t.createElement(yt,{prefixCls:"".concat(q,"-overflow"),data:a,renderItem:ve,renderRest:E,suffix:f,itemKey:Ft,maxCount:te});return t.createElement("span",{className:"".concat(q,"-wrap")},D,!a.length&&!Ne&&t.createElement("span",{className:"".concat(q,"-placeholder")},m))},Kt=function(e){var r=e.inputElement,o=e.prefixCls,a=e.id,i=e.inputRef,u=e.disabled,c=e.autoFocus,v=e.autoComplete,m=e.activeDescendantId,s=e.mode,g=e.open,T=e.values,l=e.placeholder,x=e.tabIndex,w=e.showSearch,I=e.searchValue,A=e.activeValue,te=e.maxLength,U=e.onInputKeyDown,M=e.onInputMouseDown,Z=e.onInputChange,Q=e.onInputPaste,ie=e.onInputCompositionStart,Y=e.onInputCompositionEnd,z=e.onInputBlur,ue=e.title,_=t.useState(!1),k=re(_,2),X=k[0],H=k[1],$=s==="combobox",ee=$||w,j=T[0],le=I||"";$&&A&&!X&&(le=A),t.useEffect(function(){$&&H(!1)},[$,A]);var F=s!=="combobox"&&!g&&!w?!1:!!le,h=ue===void 0?Gn(j):ue,O=t.useMemo(function(){return j?null:t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:F?{visibility:"hidden"}:void 0},l)},[j,F,l,o]);return t.createElement("span",{className:"".concat(o,"-selection-wrap")},t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(Hn,{ref:i,prefixCls:o,id:a,open:g,inputElement:r,disabled:u,autoFocus:c,autoComplete:v,editable:ee,activeDescendantId:m,value:le,onKeyDown:U,onMouseDown:M,onChange:function(ye){H(!0),Z(ye)},onPaste:Q,onCompositionStart:ie,onCompositionEnd:Y,onBlur:z,tabIndex:x,attrs:gn(e,!0),maxLength:$?te:void 0})),!$&&j?t.createElement("span",{className:"".concat(o,"-selection-item"),title:h,style:F?{visibility:"hidden"}:void 0},j.label):null,O)},Bt=function(e,r){var o=t.useRef(null),a=t.useRef(!1),i=e.prefixCls,u=e.open,c=e.mode,v=e.showSearch,m=e.tokenWithEnter,s=e.disabled,g=e.prefix,T=e.autoClearSearchValue,l=e.onSearch,x=e.onSearchSubmit,w=e.onToggleOpen,I=e.onInputKeyDown,A=e.onInputBlur,te=e.domRef;t.useImperativeHandle(r,function(){return{focus:function(h){o.current.focus(h)},blur:function(){o.current.blur()}}});var U=Un(0),M=re(U,2),Z=M[0],Q=M[1],ie=function(h){var O=h.which,fe=o.current instanceof HTMLTextAreaElement;!fe&&u&&(O===y.UP||O===y.DOWN)&&h.preventDefault(),I&&I(h),O===y.ENTER&&c==="tags"&&!a.current&&!u&&(x==null||x(h.target.value)),!(fe&&!u&&~[y.UP,y.DOWN,y.LEFT,y.RIGHT].indexOf(O))&&Pt(O)&&w(!0)},Y=function(){Q(!0)},z=t.useRef(null),ue=function(h){l(h,!0,a.current)!==!1&&w(!0)},_=function(){a.current=!0},k=function(h){a.current=!1,c!=="combobox"&&ue(h.target.value)},X=function(h){var O=h.target.value;if(m&&z.current&&/[\r\n]/.test(z.current)){var fe=z.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");O=O.replace(fe,z.current)}z.current=null,ue(O)},H=function(h){var O=h.clipboardData,fe=O==null?void 0:O.getData("text");z.current=fe||""},$=function(h){var O=h.target;if(O!==o.current){var fe=document.body.style.msTouchAction!==void 0;fe?setTimeout(function(){o.current.focus()}):o.current.focus()}},ee=function(h){var O=Z();h.target!==o.current&&!O&&!(c==="combobox"&&s)&&h.preventDefault(),(c!=="combobox"&&(!v||!O)||!u)&&(u&&T!==!1&&l("",!0,!1),w())},j={inputRef:o,onInputKeyDown:ie,onInputMouseDown:Y,onInputChange:X,onInputPaste:H,onInputCompositionStart:_,onInputCompositionEnd:k,onInputBlur:A},le=c==="multiple"||c==="tags"?t.createElement(kt,ze({},e,j)):t.createElement(Kt,ze({},e,j));return t.createElement("div",{ref:te,className:"".concat(i,"-selector"),onClick:$,onMouseDown:ee},g&&t.createElement("div",{className:"".concat(i,"-prefix")},g),le)},$t=t.forwardRef(Bt),zt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Wt=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},Ut=function(e,r){var o=e.prefixCls;e.disabled;var a=e.visible,i=e.children,u=e.popupElement,c=e.animation,v=e.transitionName,m=e.dropdownStyle,s=e.dropdownClassName,g=e.direction,T=g===void 0?"ltr":g,l=e.placement,x=e.builtinPlacements,w=e.dropdownMatchSelectWidth,I=e.dropdownRender,A=e.dropdownAlign,te=e.getPopupContainer,U=e.empty,M=e.getTriggerDOMNode,Z=e.onPopupVisibleChange,Q=e.onPopupMouseEnter,ie=nn(e,zt),Y="".concat(o,"-dropdown"),z=u;I&&(z=I(u));var ue=t.useMemo(function(){return x||Wt(w)},[x,w]),_=c?"".concat(Y,"-").concat(c):v,k=typeof w=="number",X=t.useMemo(function(){return k?null:w===!1?"minWidth":"width"},[w,k]),H=m;k&&(H=G(G({},H),{},{width:w}));var $=t.useRef(null);return t.useImperativeHandle(r,function(){return{getPopupElement:function(){var j;return(j=$.current)===null||j===void 0?void 0:j.popupElement}}}),t.createElement(Et,ze({},ie,{showAction:Z?["click"]:[],hideAction:Z?["click"]:[],popupPlacement:l||(T==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:ue,prefixCls:Y,popupTransitionName:_,popup:t.createElement("div",{onMouseEnter:Q},z),ref:$,stretch:X,popupAlign:A,popupVisible:a,getPopupContainer:te,popupClassName:He(s,ae({},"".concat(Y,"-empty"),U)),popupStyle:H,getTriggerDOMNode:M,onPopupVisibleChange:Z}),i)},Ht=t.forwardRef(Ut);function Kn(n,e){var r=n.key,o;return"value"in n&&(o=n.value),r??(o!==void 0?o:"rc-index-key-".concat(e))}function Dn(n){return typeof n<"u"&&!Number.isNaN(n)}function Yn(n,e){var r=n||{},o=r.label,a=r.value,i=r.options,u=r.groupLabel,c=o||(e?"children":"label");return{label:c,value:a||"value",options:i||"options",groupLabel:u||c}}function jt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,o=e.childrenAsData,a=[],i=Yn(r,!1),u=i.label,c=i.value,v=i.options,m=i.groupLabel;function s(g,T){Array.isArray(g)&&g.forEach(function(l){if(T||!(v in l)){var x=l[c];a.push({key:Kn(l,a.length),groupOption:T,data:l,label:l[u],value:x})}else{var w=l[m];w===void 0&&o&&(w=l.label),a.push({key:Kn(l,a.length),group:!0,data:l,label:w}),s(l[v],!0)}})}return s(n,!1),a}function On(n){var e=G({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return mt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var Gt=function(e,r,o){if(!r||!r.length)return null;var a=!1,i=function c(v,m){var s=It(m),g=s[0],T=s.slice(1);if(!g)return[v];var l=v.split(g);return a=a||l.length>1,l.reduce(function(x,w){return[].concat(Re(x),Re(c(w,T)))},[]).filter(Boolean)},u=i(e,r);return a?typeof o<"u"?u.slice(0,o):u:null},Pn=t.createContext(null);function Yt(n){var e=n.visible,r=n.values;if(!e)return null;var o=50;return t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,o).map(function(a){var i=a.label,u=a.value;return["number","string"].includes(pn(i))?i:u}).join(", ")),r.length>o?", ...":null)}var Xt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Jt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Mn=function(e){return e==="tags"||e==="multiple"},Qt=t.forwardRef(function(n,e){var r,o=n.id,a=n.prefixCls,i=n.className,u=n.showSearch,c=n.tagRender,v=n.direction,m=n.omitDomProps,s=n.displayValues,g=n.onDisplayValuesChange,T=n.emptyOptions,l=n.notFoundContent,x=l===void 0?"Not Found":l,w=n.onClear,I=n.mode,A=n.disabled,te=n.loading,U=n.getInputElement,M=n.getRawInputElement,Z=n.open,Q=n.defaultOpen,ie=n.onDropdownVisibleChange,Y=n.activeValue,z=n.onActiveValueChange,ue=n.activeDescendantId,_=n.searchValue,k=n.autoClearSearchValue,X=n.onSearch,H=n.onSearchSplit,$=n.tokenSeparators,ee=n.allowClear,j=n.prefix,le=n.suffixIcon,F=n.clearIcon,h=n.OptionList,O=n.animation,fe=n.transitionName,ye=n.dropdownStyle,he=n.dropdownClassName,q=n.dropdownMatchSelectWidth,Ne=n.dropdownRender,oe=n.dropdownAlign,ke=n.placement,De=n.builtinPlacements,ve=n.getPopupContainer,E=n.showAction,f=E===void 0?[]:E,D=n.onFocus,L=n.onBlur,b=n.onKeyUp,P=n.onKeyDown,K=n.onMouseDown,J=nn(n,Xt),B=Mn(I),me=(u!==void 0?u:B)||I==="combobox",xe=G({},J);Jt.forEach(function(N){delete xe[N]}),m==null||m.forEach(function(N){delete xe[N]});var Te=t.useState(!1),Ve=re(Te,2),ne=Ve[0],Je=Ve[1];t.useEffect(function(){Je(gt())},[]);var je=t.useRef(null),ge=t.useRef(null),be=t.useRef(null),Se=t.useRef(null),Ie=t.useRef(null),Oe=t.useRef(!1),tn=Ot(),_e=re(tn,3),Le=_e[0],Me=_e[1],bn=_e[2];t.useImperativeHandle(e,function(){var N,R;return{focus:(N=Se.current)===null||N===void 0?void 0:N.focus,blur:(R=Se.current)===null||R===void 0?void 0:R.blur,scrollTo:function(Ce){var se;return(se=Ie.current)===null||se===void 0?void 0:se.scrollTo(Ce)},nativeElement:je.current||ge.current}});var Pe=t.useMemo(function(){var N;if(I!=="combobox")return _;var R=(N=s[0])===null||N===void 0?void 0:N.value;return typeof R=="string"||typeof R=="number"?String(R):""},[_,I,s]),un=I==="combobox"&&typeof U=="function"&&U()||null,Ee=typeof M=="function"&&M(),Sn=pt(ge,Ee==null||(r=Ee.props)===null||r===void 0?void 0:r.ref),ln=t.useState(!1),cn=re(ln,2),wn=cn[0],sn=cn[1];ht(function(){sn(!0)},[]);var fn=xn(!1,{defaultValue:Q,value:Z}),Ge=re(fn,2),on=Ge[0],an=Ge[1],ce=wn?on:!1,dn=!x&&T;(A||dn&&ce&&I==="combobox")&&(ce=!1);var Qe=dn?!1:ce,d=t.useCallback(function(N){var R=N!==void 0?N:!ce;A||(an(R),ce!==R&&(ie==null||ie(R)))},[A,ce,an,ie]),C=t.useMemo(function(){return($||[]).some(function(N){return[`
`,`\r
`].includes(N)})},[$]),p=t.useContext(Pn)||{},S=p.maxCount,V=p.rawValues,W=function(R,we,Ce){if(!(B&&Dn(S)&&(V==null?void 0:V.size)>=S)){var se=!0,pe=R;z==null||z(null);var $e=Gt(R,$,Dn(S)?S-V.size:void 0),Fe=Ce?null:$e;return I!=="combobox"&&Fe&&(pe="",H==null||H(Fe),d(!1),se=!1),X&&Pe!==pe&&X(pe,{source:we?"typing":"effect"}),se}},Ke=function(R){!R||!R.trim()||X(R,{source:"submit"})};t.useEffect(function(){!ce&&!B&&I!=="combobox"&&W("",!1,!1)},[ce]),t.useEffect(function(){on&&A&&an(!1),A&&!Oe.current&&Me(!1)},[A]);var Ae=Un(),We=re(Ae,2),de=We[0],Ue=We[1],qe=t.useRef(!1),Cn=function(R){var we=de(),Ce=R.key,se=Ce==="Enter";if(se&&(I!=="combobox"&&R.preventDefault(),ce||d(!0)),Ue(!!Pe),Ce==="Backspace"&&!we&&B&&!Pe&&s.length){for(var pe=Re(s),$e=null,Fe=pe.length-1;Fe>=0;Fe-=1){var Ye=pe[Fe];if(!Ye.disabled){pe.splice(Fe,1),$e=Ye;break}}$e&&g(pe,{type:"remove",values:[$e]})}for(var en=arguments.length,Xe=new Array(en>1?en-1:0),vn=1;vn<en;vn++)Xe[vn-1]=arguments[vn];if(ce&&(!se||!qe.current)){var mn;se&&(qe.current=!0),(mn=Ie.current)===null||mn===void 0||mn.onKeyDown.apply(mn,[R].concat(Xe))}P==null||P.apply(void 0,[R].concat(Xe))},Nn=function(R){for(var we=arguments.length,Ce=new Array(we>1?we-1:0),se=1;se<we;se++)Ce[se-1]=arguments[se];if(ce){var pe;(pe=Ie.current)===null||pe===void 0||pe.onKeyUp.apply(pe,[R].concat(Ce))}R.key==="Enter"&&(qe.current=!1),b==null||b.apply(void 0,[R].concat(Ce))},rn=function(R){var we=s.filter(function(Ce){return Ce!==R});g(we,{type:"remove",values:[R]})},Be=function(){qe.current=!1},yn=t.useRef(!1),Zn=function(){Me(!0),A||(D&&!yn.current&&D.apply(void 0,arguments),f.includes("focus")&&d(!0)),yn.current=!0},et=function(){Oe.current=!0,Me(!1,function(){yn.current=!1,Oe.current=!1,d(!1)}),!A&&(Pe&&(I==="tags"?X(Pe,{source:"submit"}):I==="multiple"&&X("",{source:"blur"})),L&&L.apply(void 0,arguments))},Ze=[];t.useEffect(function(){return function(){Ze.forEach(function(N){return clearTimeout(N)}),Ze.splice(0,Ze.length)}},[]);var nt=function(R){var we,Ce=R.target,se=(we=be.current)===null||we===void 0?void 0:we.getPopupElement();if(se&&se.contains(Ce)){var pe=setTimeout(function(){var en=Ze.indexOf(pe);if(en!==-1&&Ze.splice(en,1),bn(),!ne&&!se.contains(document.activeElement)){var Xe;(Xe=Se.current)===null||Xe===void 0||Xe.focus()}});Ze.push(pe)}for(var $e=arguments.length,Fe=new Array($e>1?$e-1:0),Ye=1;Ye<$e;Ye++)Fe[Ye-1]=arguments[Ye];K==null||K.apply(void 0,[R].concat(Fe))},tt=t.useState({}),ot=re(tt,2),at=ot[1];function rt(){at({})}var Tn;Ee&&(Tn=function(R){d(R)}),Mt(function(){var N;return[je.current,(N=be.current)===null||N===void 0?void 0:N.getPopupElement()]},Qe,d,!!Ee);var it=t.useMemo(function(){return G(G({},n),{},{notFoundContent:x,open:ce,triggerOpen:Qe,id:o,showSearch:me,multiple:B,toggleOpen:d})},[n,x,Qe,ce,o,me,B,d]),Vn=!!le||te,_n;Vn&&(_n=t.createElement(hn,{className:He("".concat(a,"-arrow"),ae({},"".concat(a,"-arrow-loading"),te)),customizeIcon:le,customizeIconProps:{loading:te,searchValue:Pe,open:ce,focused:Le,showSearch:me}}));var ut=function(){var R;w==null||w(),(R=Se.current)===null||R===void 0||R.focus(),g([],{type:"clear",values:s}),W("",!1,!1)},Ln=xt(a,ut,s,ee,F,A,Pe,I),lt=Ln.allowClear,ct=Ln.clearIcon,st=t.createElement(h,{ref:Ie}),ft=He(a,i,ae(ae(ae(ae(ae(ae(ae(ae(ae(ae({},"".concat(a,"-focused"),Le),"".concat(a,"-multiple"),B),"".concat(a,"-single"),!B),"".concat(a,"-allow-clear"),ee),"".concat(a,"-show-arrow"),Vn),"".concat(a,"-disabled"),A),"".concat(a,"-loading"),te),"".concat(a,"-open"),ce),"".concat(a,"-customize-input"),un),"".concat(a,"-show-search"),me)),An=t.createElement(Ht,{ref:be,disabled:A,prefixCls:a,visible:Qe,popupElement:st,animation:O,transitionName:fe,dropdownStyle:ye,dropdownClassName:he,direction:v,dropdownMatchSelectWidth:q,dropdownRender:Ne,dropdownAlign:oe,placement:ke,builtinPlacements:De,getPopupContainer:ve,empty:T,getTriggerDOMNode:function(R){return ge.current||R},onPopupVisibleChange:Tn,onPopupMouseEnter:rt},Ee?t.cloneElement(Ee,{ref:Sn}):t.createElement($t,ze({},n,{domRef:ge,prefixCls:a,inputElement:un,ref:Se,id:o,prefix:j,showSearch:me,autoClearSearchValue:k,mode:I,activeDescendantId:ue,tagRender:c,values:s,open:ce,onToggleOpen:d,activeValue:Y,searchValue:Pe,onSearch:W,onSearchSubmit:Ke,onRemove:rn,tokenWithEnter:C,onInputBlur:Be}))),In;return Ee?In=An:In=t.createElement("div",ze({className:ft},xe,{ref:je,onMouseDown:nt,onKeyDown:Cn,onKeyUp:Nn,onFocus:Zn,onBlur:et}),t.createElement(Yt,{visible:Le&&!ce,values:s}),An,_n,lt&&ct),t.createElement(Wn.Provider,{value:it},In)}),Xn=function(){return null};Xn.isSelectOptGroup=!0;var Jn=function(){return null};Jn.isSelectOption=!0;function qt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Zt=["disabled","title","children","style","className"];function Bn(n){return typeof n=="string"||typeof n=="number"}var eo=function(e,r){var o=Dt(),a=o.prefixCls,i=o.id,u=o.open,c=o.multiple,v=o.mode,m=o.searchValue,s=o.toggleOpen,g=o.notFoundContent,T=o.onPopupScroll,l=t.useContext(Pn),x=l.maxCount,w=l.flattenOptions,I=l.onActiveValue,A=l.defaultActiveFirstOption,te=l.onSelect,U=l.menuItemSelectedIcon,M=l.rawValues,Z=l.fieldNames,Q=l.virtual,ie=l.direction,Y=l.listHeight,z=l.listItemHeight,ue=l.optionRender,_="".concat(a,"-item"),k=bt(function(){return w},[u,w],function(E,f){return f[0]&&E[1]!==f[1]}),X=t.useRef(null),H=t.useMemo(function(){return c&&Dn(x)&&(M==null?void 0:M.size)>=x},[c,x,M==null?void 0:M.size]),$=function(f){f.preventDefault()},ee=function(f){var D;(D=X.current)===null||D===void 0||D.scrollTo(typeof f=="number"?{index:f}:f)},j=t.useCallback(function(E){return v==="combobox"?!1:M.has(E)},[v,Re(M).toString(),M.size]),le=function(f){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,L=k.length,b=0;b<L;b+=1){var P=(f+b*D+L)%L,K=k[P]||{},J=K.group,B=K.data;if(!J&&!(B!=null&&B.disabled)&&(j(B.value)||!H))return P}return-1},F=t.useState(function(){return le(0)}),h=re(F,2),O=h[0],fe=h[1],ye=function(f){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;fe(f);var L={source:D?"keyboard":"mouse"},b=k[f];if(!b){I(null,-1,L);return}I(b.value,f,L)};t.useEffect(function(){ye(A!==!1?le(0):-1)},[k.length,m]);var he=t.useCallback(function(E){return v==="combobox"?String(E).toLowerCase()===m.toLowerCase():M.has(E)},[v,m,Re(M).toString(),M.size]);t.useEffect(function(){var E=setTimeout(function(){if(!c&&u&&M.size===1){var D=Array.from(M)[0],L=k.findIndex(function(b){var P=b.data;return P.value===D});L!==-1&&(ye(L),ee(L))}});if(u){var f;(f=X.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(E)}},[u,m]);var q=function(f){f!==void 0&&te(f,{selected:!M.has(f)}),c||s(!1)};if(t.useImperativeHandle(r,function(){return{onKeyDown:function(f){var D=f.which,L=f.ctrlKey;switch(D){case y.N:case y.P:case y.UP:case y.DOWN:{var b=0;if(D===y.UP?b=-1:D===y.DOWN?b=1:qt()&&L&&(D===y.N?b=1:D===y.P&&(b=-1)),b!==0){var P=le(O+b,b);ee(P),ye(P,!0)}break}case y.TAB:case y.ENTER:{var K,J=k[O];J&&!(J!=null&&(K=J.data)!==null&&K!==void 0&&K.disabled)&&!H?q(J.value):q(void 0),u&&f.preventDefault();break}case y.ESC:s(!1),u&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){ee(f)}}}),k.length===0)return t.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(_,"-empty"),onMouseDown:$},g);var Ne=Object.keys(Z).map(function(E){return Z[E]}),oe=function(f){return f.label};function ke(E,f){var D=E.group;return{role:D?"presentation":"option",id:"".concat(i,"_list_").concat(f)}}var De=function(f){var D=k[f];if(!D)return null;var L=D.data||{},b=L.value,P=D.group,K=gn(L,!0),J=oe(D);return D?t.createElement("div",ze({"aria-label":typeof J=="string"&&!P?J:null},K,{key:f},ke(D,f),{"aria-selected":he(b)}),b):null},ve={role:"listbox",id:"".concat(i,"_list")};return t.createElement(t.Fragment,null,Q&&t.createElement("div",ze({},ve,{style:{height:0,width:0,overflow:"hidden"}}),De(O-1),De(O),De(O+1)),t.createElement(Rt,{itemKey:"key",ref:X,data:k,height:Y,itemHeight:z,fullHeight:!1,onMouseDown:$,onScroll:T,virtual:Q,direction:ie,innerProps:Q?null:ve},function(E,f){var D=E.group,L=E.groupOption,b=E.data,P=E.label,K=E.value,J=b.key;if(D){var B,me=(B=b.title)!==null&&B!==void 0?B:Bn(P)?P.toString():void 0;return t.createElement("div",{className:He(_,"".concat(_,"-group"),b.className),title:me},P!==void 0?P:J)}var xe=b.disabled,Te=b.title;b.children;var Ve=b.style,ne=b.className,Je=nn(b,Zt),je=St(Je,Ne),ge=j(K),be=xe||!ge&&H,Se="".concat(_,"-option"),Ie=He(_,Se,ne,ae(ae(ae(ae({},"".concat(Se,"-grouped"),L),"".concat(Se,"-active"),O===f&&!be),"".concat(Se,"-disabled"),be),"".concat(Se,"-selected"),ge)),Oe=oe(E),tn=!U||typeof U=="function"||ge,_e=typeof Oe=="number"?Oe:Oe||K,Le=Bn(_e)?_e.toString():void 0;return Te!==void 0&&(Le=Te),t.createElement("div",ze({},gn(je),Q?{}:ke(E,f),{"aria-selected":he(K),className:Ie,title:Le,onMouseMove:function(){O===f||be||ye(f)},onClick:function(){be||q(K)},style:Ve}),t.createElement("div",{className:"".concat(Se,"-content")},typeof ue=="function"?ue(E,{index:f}):_e),t.isValidElement(U)||ge,tn&&t.createElement(hn,{className:"".concat(_,"-option-state"),customizeIcon:U,customizeIconProps:{value:K,disabled:be,isSelected:ge}},ge?"✓":null))}))},no=t.forwardRef(eo);const to=function(n,e){var r=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var i=r.current,u=i.values,c=i.options,v=n.map(function(g){if(g.label===void 0){var T;return G(G({},g),{},{label:(T=u.get(g.value))===null||T===void 0?void 0:T.label})}return g}),m=new Map,s=new Map;return v.forEach(function(g){m.set(g.value,g),s.set(g.value,e.get(g.value)||c.get(g.value))}),r.current.values=m,r.current.options=s,v},[n,e]),a=t.useCallback(function(i){return e.get(i)||r.current.options.get(i)},[e]);return[o,a]};function Rn(n,e){return jn(n).join("").toUpperCase().includes(e)}const oo=function(n,e,r,o,a){return t.useMemo(function(){if(!r||o===!1)return n;var i=e.options,u=e.label,c=e.value,v=[],m=typeof o=="function",s=r.toUpperCase(),g=m?o:function(l,x){return a?Rn(x[a],s):x[i]?Rn(x[u!=="children"?u:"label"],s):Rn(x[c],s)},T=m?function(l){return On(l)}:function(l){return l};return n.forEach(function(l){if(l[i]){var x=g(r,T(l));if(x)v.push(l);else{var w=l[i].filter(function(I){return g(r,T(I))});w.length&&v.push(G(G({},l),{},ae({},i,w)))}return}g(r,T(l))&&v.push(l)}),v},[n,o,a,r,e])};var $n=0,ao=wt();function ro(){var n;return ao?(n=$n,$n+=1):n="TEST_OR_SSR",n}function io(n){var e=t.useState(),r=re(e,2),o=r[0],a=r[1];return t.useEffect(function(){a("rc_select_".concat(ro()))},[]),n||o}var uo=["children","value"],lo=["children"];function co(n){var e=n,r=e.key,o=e.props,a=o.children,i=o.value,u=nn(o,uo);return G({key:r,value:i!==void 0?i:r,children:a},u)}function Qn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ct(n).map(function(r,o){if(!t.isValidElement(r)||!r.type)return null;var a=r,i=a.type.isSelectOptGroup,u=a.key,c=a.props,v=c.children,m=nn(c,lo);return e||!i?co(r):G(G({key:"__RC_SELECT_GRP__".concat(u===null?o:u,"__"),label:u},m),{},{options:Qn(v)})}).filter(function(r){return r})}var so=function(e,r,o,a,i){return t.useMemo(function(){var u=e,c=!e;c&&(u=Qn(r));var v=new Map,m=new Map,s=function(l,x,w){w&&typeof w=="string"&&l.set(x[w],x)},g=function T(l){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=0;w<l.length;w+=1){var I=l[w];!I[o.options]||x?(v.set(I[o.value],I),s(m,I,o.label),s(m,I,a),s(m,I,i)):T(I[o.options],!0)}};return g(u),{options:u,valueOptions:v,labelOptions:m}},[e,r,o,a,i])};function zn(n){var e=t.useRef();e.current=n;var r=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return r}var fo=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],vo=["inputValue"];function mo(n){return!n||pn(n)!=="object"}var go=t.forwardRef(function(n,e){var r=n.id,o=n.mode,a=n.prefixCls,i=a===void 0?"rc-select":a,u=n.backfill,c=n.fieldNames,v=n.inputValue,m=n.searchValue,s=n.onSearch,g=n.autoClearSearchValue,T=g===void 0?!0:g,l=n.onSelect,x=n.onDeselect,w=n.dropdownMatchSelectWidth,I=w===void 0?!0:w,A=n.filterOption,te=n.filterSort,U=n.optionFilterProp,M=n.optionLabelProp,Z=n.options,Q=n.optionRender,ie=n.children,Y=n.defaultActiveFirstOption,z=n.menuItemSelectedIcon,ue=n.virtual,_=n.direction,k=n.listHeight,X=k===void 0?200:k,H=n.listItemHeight,$=H===void 0?20:H,ee=n.labelRender,j=n.value,le=n.defaultValue,F=n.labelInValue,h=n.onChange,O=n.maxCount,fe=nn(n,fo),ye=io(r),he=Mn(o),q=!!(!Z&&ie),Ne=t.useMemo(function(){return A===void 0&&o==="combobox"?!1:A},[A,o]),oe=t.useMemo(function(){return Yn(c,q)},[JSON.stringify(c),q]),ke=xn("",{value:m!==void 0?m:v,postState:function(C){return C||""}}),De=re(ke,2),ve=De[0],E=De[1],f=so(Z,ie,oe,U,M),D=f.valueOptions,L=f.labelOptions,b=f.options,P=t.useCallback(function(d){var C=jn(d);return C.map(function(p){var S,V,W,Ke,Ae;if(mo(p))S=p;else{var We;W=p.key,V=p.label,S=(We=p.value)!==null&&We!==void 0?We:W}var de=D.get(S);if(de){var Ue;V===void 0&&(V=de==null?void 0:de[M||oe.label]),W===void 0&&(W=(Ue=de==null?void 0:de.key)!==null&&Ue!==void 0?Ue:S),Ke=de==null?void 0:de.disabled,Ae=de==null?void 0:de.title}return{label:V,value:S,key:W,disabled:Ke,title:Ae}})},[oe,M,D]),K=xn(le,{value:j}),J=re(K,2),B=J[0],me=J[1],xe=t.useMemo(function(){var d,C=he&&B===null?[]:B,p=P(C);return o==="combobox"&&Lt((d=p[0])===null||d===void 0?void 0:d.value)?[]:p},[B,P,o,he]),Te=to(xe,D),Ve=re(Te,2),ne=Ve[0],Je=Ve[1],je=t.useMemo(function(){if(!o&&ne.length===1){var d=ne[0];if(d.value===null&&(d.label===null||d.label===void 0))return[]}return ne.map(function(C){var p;return G(G({},C),{},{label:(p=typeof ee=="function"?ee(C):C.label)!==null&&p!==void 0?p:C.value})})},[o,ne,ee]),ge=t.useMemo(function(){return new Set(ne.map(function(d){return d.value}))},[ne]);t.useEffect(function(){if(o==="combobox"){var d,C=(d=ne[0])===null||d===void 0?void 0:d.value;E(_t(C)?String(C):"")}},[ne]);var be=zn(function(d,C){var p=C??d;return ae(ae({},oe.value,d),oe.label,p)}),Se=t.useMemo(function(){if(o!=="tags")return b;var d=Re(b),C=function(S){return D.has(S)};return Re(ne).sort(function(p,S){return p.value<S.value?-1:1}).forEach(function(p){var S=p.value;C(S)||d.push(be(S,p.label))}),d},[be,b,D,ne,o]),Ie=oo(Se,oe,ve,Ne,U),Oe=t.useMemo(function(){return o!=="tags"||!ve||Ie.some(function(d){return d[U||"value"]===ve})||Ie.some(function(d){return d[oe.value]===ve})?Ie:[be(ve)].concat(Re(Ie))},[be,U,o,Ie,ve,oe]),tn=function d(C){var p=Re(C).sort(function(S,V){return te(S,V,{searchValue:ve})});return p.map(function(S){return Array.isArray(S.options)?G(G({},S),{},{options:S.options.length>0?d(S.options):S.options}):S})},_e=t.useMemo(function(){return te?tn(Oe):Oe},[Oe,te,ve]),Le=t.useMemo(function(){return jt(_e,{fieldNames:oe,childrenAsData:q})},[_e,oe,q]),Me=function(C){var p=P(C);if(me(p),h&&(p.length!==ne.length||p.some(function(W,Ke){var Ae;return((Ae=ne[Ke])===null||Ae===void 0?void 0:Ae.value)!==(W==null?void 0:W.value)}))){var S=F?p:p.map(function(W){return W.value}),V=p.map(function(W){return On(Je(W.value))});h(he?S:S[0],he?V:V[0])}},bn=t.useState(null),Pe=re(bn,2),un=Pe[0],Ee=Pe[1],Sn=t.useState(0),ln=re(Sn,2),cn=ln[0],wn=ln[1],sn=Y!==void 0?Y:o!=="combobox",fn=t.useCallback(function(d,C){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=p.source,V=S===void 0?"keyboard":S;wn(C),u&&o==="combobox"&&d!==null&&V==="keyboard"&&Ee(String(d))},[u,o]),Ge=function(C,p,S){var V=function(){var rn,Be=Je(C);return[F?{label:Be==null?void 0:Be[oe.label],value:C,key:(rn=Be==null?void 0:Be.key)!==null&&rn!==void 0?rn:C}:C,On(Be)]};if(p&&l){var W=V(),Ke=re(W,2),Ae=Ke[0],We=Ke[1];l(Ae,We)}else if(!p&&x&&S!=="clear"){var de=V(),Ue=re(de,2),qe=Ue[0],Cn=Ue[1];x(qe,Cn)}},on=zn(function(d,C){var p,S=he?C.selected:!0;S?p=he?[].concat(Re(ne),[d]):[d]:p=ne.filter(function(V){return V.value!==d}),Me(p),Ge(d,S),o==="combobox"?Ee(""):(!Mn||T)&&(E(""),Ee(""))}),an=function(C,p){Me(C);var S=p.type,V=p.values;(S==="remove"||S==="clear")&&V.forEach(function(W){Ge(W.value,!1,S)})},ce=function(C,p){if(E(C),Ee(null),p.source==="submit"){var S=(C||"").trim();if(S){var V=Array.from(new Set([].concat(Re(ge),[S])));Me(V),Ge(S,!0),E("")}return}p.source!=="blur"&&(o==="combobox"&&Me(C),s==null||s(C))},dn=function(C){var p=C;o!=="tags"&&(p=C.map(function(V){var W=L.get(V);return W==null?void 0:W.value}).filter(function(V){return V!==void 0}));var S=Array.from(new Set([].concat(Re(ge),Re(p))));Me(S),S.forEach(function(V){Ge(V,!0)})},Qe=t.useMemo(function(){var d=ue!==!1&&I!==!1;return G(G({},f),{},{flattenOptions:Le,onActiveValue:fn,defaultActiveFirstOption:sn,onSelect:on,menuItemSelectedIcon:z,rawValues:ge,fieldNames:oe,virtual:d,direction:_,listHeight:X,listItemHeight:$,childrenAsData:q,maxCount:O,optionRender:Q})},[O,f,Le,fn,sn,on,z,ge,oe,ue,I,_,X,$,q,Q]);return t.createElement(Pn.Provider,{value:Qe},t.createElement(Qt,ze({},fe,{id:ye,prefixCls:i,ref:e,omitDomProps:vo,mode:o,displayValues:je,onDisplayValuesChange:an,direction:_,searchValue:ve,onSearch:ce,autoClearSearchValue:T,onSearchSplit:dn,dropdownMatchSelectWidth:I,OptionList:no,emptyOptions:!Le.length,activeValue:un,activeDescendantId:"".concat(ye,"_list_").concat(cn)})))}),qn=go;qn.Option=Jn;qn.OptGroup=Xn;export{Jn as O,qn as T,Xn as a};
//# sourceMappingURL=rc-select--wtvdLYx.js.map
