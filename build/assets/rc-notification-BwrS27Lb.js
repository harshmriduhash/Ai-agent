import{d as H,a as ge,e as ee,_ as ue,c as Ne,b as z,h as J}from"./@babel-CJTwEOVv.js";import{r as n,R as V}from"./react-CskVYjlA.js";import{r as Re}from"./react-dom-vpJdduAb.js";import{c as Q}from"./classnames-ELZfJkp_.js";import{a as pe}from"./rc-motion-DwMjwbdb.js";import{B as Ae,K as _e}from"./rc-util-D-V1B0B9.js";var Le=n.forwardRef(function(t,a){var d=t.prefixCls,c=t.style,l=t.className,N=t.duration,C=N===void 0?4.5:N,A=t.showProgress,b=t.pauseOnHover,_=b===void 0?!0:b,F=t.eventKey,O=t.content,m=t.closable,g=t.closeIcon,M=g===void 0?"x":g,y=t.props,f=t.onClick,K=t.onNoticeClose,I=t.times,E=t.hovering,S=n.useState(!1),x=H(S,2),u=x[0],p=x[1],o=n.useState(0),e=H(o,2),r=e[0],i=e[1],R=n.useState(0),L=H(R,2),k=L[0],U=L[1],v=E||u,P=C>0&&A,T=function(){K(F)},q=function(s){(s.key==="Enter"||s.code==="Enter"||s.keyCode===_e.ENTER)&&T()};n.useEffect(function(){if(!v&&C>0){var w=Date.now()-k,s=setTimeout(function(){T()},C*1e3-k);return function(){_&&clearTimeout(s),U(Date.now()-w)}}},[C,v,I]),n.useEffect(function(){if(!v&&P&&(_||k===0)){var w=performance.now(),s,h=function ne(){cancelAnimationFrame(s),s=requestAnimationFrame(function(oe){var G=oe+k-w,j=Math.min(G/(C*1e3),1);i(j*100),j<1&&ne()})};return h(),function(){_&&cancelAnimationFrame(s)}}},[C,k,v,P,I]);var X=n.useMemo(function(){return ge(m)==="object"&&m!==null?m:m?{closeIcon:M}:{}},[m,M]),te=Ae(X,!0),B=100-(!r||r<0?0:r>100?100:r),D="".concat(d,"-notice");return n.createElement("div",ee({},y,{ref:a,className:Q(D,l,ue({},"".concat(D,"-closable"),m)),style:c,onMouseEnter:function(s){var h;p(!0),y==null||(h=y.onMouseEnter)===null||h===void 0||h.call(y,s)},onMouseLeave:function(s){var h;p(!1),y==null||(h=y.onMouseLeave)===null||h===void 0||h.call(y,s)},onClick:f}),n.createElement("div",{className:"".concat(D,"-content")},O),m&&n.createElement("a",ee({tabIndex:0,className:"".concat(D,"-close"),onKeyDown:q,"aria-label":"Close"},te,{onClick:function(s){s.preventDefault(),s.stopPropagation(),T()}}),X.closeIcon),P&&n.createElement("progress",{className:"".concat(D,"-progress"),max:"100",value:B},B+"%"))}),he=V.createContext({}),Ge=function(a){var d=a.children,c=a.classNames;return V.createElement(he.Provider,{value:{classNames:c}},d)},de=8,me=3,ye=16,Pe=function(a){var d={offset:de,threshold:me,gap:ye};if(a&&ge(a)==="object"){var c,l,N;d.offset=(c=a.offset)!==null&&c!==void 0?c:de,d.threshold=(l=a.threshold)!==null&&l!==void 0?l:me,d.gap=(N=a.gap)!==null&&N!==void 0?N:ye}return[!!a,d]},be=["className","style","classNames","styles"],Me=function(a){var d=a.configList,c=a.placement,l=a.prefixCls,N=a.className,C=a.style,A=a.motion,b=a.onAllNoticeRemoved,_=a.onNoticeClose,F=a.stack,O=n.useContext(he),m=O.classNames,g=n.useRef({}),M=n.useState(null),y=H(M,2),f=y[0],K=y[1],I=n.useState([]),E=H(I,2),S=E[0],x=E[1],u=d.map(function(v){return{config:v,key:String(v.key)}}),p=Pe(F),o=H(p,2),e=o[0],r=o[1],i=r.offset,R=r.threshold,L=r.gap,k=e&&(S.length>0||u.length<=R),U=typeof A=="function"?A(c):A;return n.useEffect(function(){e&&S.length>1&&x(function(v){return v.filter(function(P){return u.some(function(T){var q=T.key;return P===q})})})},[S,u,e]),n.useEffect(function(){var v;if(e&&g.current[(v=u[u.length-1])===null||v===void 0?void 0:v.key]){var P;K(g.current[(P=u[u.length-1])===null||P===void 0?void 0:P.key])}},[u,e]),V.createElement(pe,ee({key:c,className:Q(l,"".concat(l,"-").concat(c),m==null?void 0:m.list,N,ue(ue({},"".concat(l,"-stack"),!!e),"".concat(l,"-stack-expanded"),k)),style:C,keys:u,motionAppear:!0},U,{onAllRemoved:function(){b(c)}}),function(v,P){var T=v.config,q=v.className,X=v.style,te=v.index,B=T,D=B.key,w=B.times,s=String(D),h=T,ne=h.className,oe=h.style,G=h.classNames,j=h.styles,Se=Ne(h,be),ae=u.findIndex(function(Z){return Z.key===s}),Y={};if(e){var $=u.length-1-(ae>-1?ae:te-1),fe=c==="top"||c==="bottom"?"-50%":"0";if($>0){var re,ie,se;Y.height=k?(re=g.current[s])===null||re===void 0?void 0:re.offsetHeight:f==null?void 0:f.offsetHeight;for(var ve=0,ce=0;ce<$;ce++){var le;ve+=((le=g.current[u[u.length-1-ce].key])===null||le===void 0?void 0:le.offsetHeight)+L}var ke=(k?ve:$*i)*(c.startsWith("top")?1:-1),Ee=!k&&f!==null&&f!==void 0&&f.offsetWidth&&(ie=g.current[s])!==null&&ie!==void 0&&ie.offsetWidth?((f==null?void 0:f.offsetWidth)-i*2*($<3?$:3))/((se=g.current[s])===null||se===void 0?void 0:se.offsetWidth):1;Y.transform="translate3d(".concat(fe,", ").concat(ke,"px, 0) scaleX(").concat(Ee,")")}else Y.transform="translate3d(".concat(fe,", 0, 0)")}return V.createElement("div",{ref:P,className:Q("".concat(l,"-notice-wrapper"),q,G==null?void 0:G.wrapper),style:z(z(z({},X),Y),j==null?void 0:j.wrapper),onMouseEnter:function(){return x(function(W){return W.includes(s)?W:[].concat(J(W),[s])})},onMouseLeave:function(){return x(function(W){return W.filter(function(xe){return xe!==s})})}},V.createElement(Le,ee({},Se,{ref:function(W){ae>-1?g.current[s]=W:delete g.current[s]},prefixCls:l,classNames:G,styles:j,className:Q(ne,m==null?void 0:m.notice),style:oe,times:w,key:D,eventKey:D,onNoticeClose:_,hovering:e&&S.length>0})))})},we=n.forwardRef(function(t,a){var d=t.prefixCls,c=d===void 0?"rc-notification":d,l=t.container,N=t.motion,C=t.maxCount,A=t.className,b=t.style,_=t.onAllRemoved,F=t.stack,O=t.renderNotifications,m=n.useState([]),g=H(m,2),M=g[0],y=g[1],f=function(e){var r,i=M.find(function(R){return R.key===e});i==null||(r=i.onClose)===null||r===void 0||r.call(i),y(function(R){return R.filter(function(L){return L.key!==e})})};n.useImperativeHandle(a,function(){return{open:function(e){y(function(r){var i=J(r),R=i.findIndex(function(U){return U.key===e.key}),L=z({},e);if(R>=0){var k;L.times=(((k=r[R])===null||k===void 0?void 0:k.times)||0)+1,i[R]=L}else L.times=0,i.push(L);return C>0&&i.length>C&&(i=i.slice(-C)),i})},close:function(e){f(e)},destroy:function(){y([])}}});var K=n.useState({}),I=H(K,2),E=I[0],S=I[1];n.useEffect(function(){var o={};M.forEach(function(e){var r=e.placement,i=r===void 0?"topRight":r;i&&(o[i]=o[i]||[],o[i].push(e))}),Object.keys(E).forEach(function(e){o[e]=o[e]||[]}),S(o)},[M]);var x=function(e){S(function(r){var i=z({},r),R=i[e]||[];return R.length||delete i[e],i})},u=n.useRef(!1);if(n.useEffect(function(){Object.keys(E).length>0?u.current=!0:u.current&&(_==null||_(),u.current=!1)},[E]),!l)return null;var p=Object.keys(E);return Re.createPortal(n.createElement(n.Fragment,null,p.map(function(o){var e=E[o],r=n.createElement(Me,{key:o,configList:e,placement:o,prefixCls:c,className:A==null?void 0:A(o),style:b==null?void 0:b(o),motion:N,onNoticeClose:f,onAllNoticeRemoved:x,stack:F});return O?O(r,{prefixCls:c,key:o}):r})),l)}),He=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Ie=function(){return document.body},Ce=0;function De(){for(var t={},a=arguments.length,d=new Array(a),c=0;c<a;c++)d[c]=arguments[c];return d.forEach(function(l){l&&Object.keys(l).forEach(function(N){var C=l[N];C!==void 0&&(t[N]=C)})}),t}function Ue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.getContainer,d=a===void 0?Ie:a,c=t.motion,l=t.prefixCls,N=t.maxCount,C=t.className,A=t.style,b=t.onAllRemoved,_=t.stack,F=t.renderNotifications,O=Ne(t,He),m=n.useState(),g=H(m,2),M=g[0],y=g[1],f=n.useRef(),K=n.createElement(we,{container:M,ref:f,prefixCls:l,motion:c,maxCount:N,className:C,style:A,onAllRemoved:b,stack:_,renderNotifications:F}),I=n.useState([]),E=H(I,2),S=E[0],x=E[1],u=n.useMemo(function(){return{open:function(o){var e=De(O,o);(e.key===null||e.key===void 0)&&(e.key="rc-notification-".concat(Ce),Ce+=1),x(function(r){return[].concat(J(r),[{type:"open",config:e}])})},close:function(o){x(function(e){return[].concat(J(e),[{type:"close",key:o}])})},destroy:function(){x(function(o){return[].concat(J(o),[{type:"destroy"}])})}}},[]);return n.useEffect(function(){y(d())}),n.useEffect(function(){if(f.current&&S.length){S.forEach(function(e){switch(e.type){case"open":f.current.open(e.config);break;case"close":f.current.close(e.key);break;case"destroy":f.current.destroy();break}});var p,o;x(function(e){return(p!==e||!o)&&(p=e,o=e.filter(function(r){return!S.includes(r)})),o})}},[S]),[u,K]}export{Le as N,Ge as a,Ue as u};
//# sourceMappingURL=rc-notification-BwrS27Lb.js.map
